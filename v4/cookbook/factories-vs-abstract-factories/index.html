<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="laminas-servicemanager: factory-driven dependency injection container"> 

    
    
        
    
    <meta name="docsearch:version" content="4.0.0,latest">
    <meta name="docsearch:language" content="en">
    <meta name="docsearch:component" content="laminas-servicemanager">

    <link rel="canonical" href="https://docs.laminas.dev/laminas-servicemanager/v4/cookbook/factories-vs-abstract-factories/">
    <link rel="shortcut icon" href="https://docs.laminas.dev/img/trademark-laminas-foundation-rgb.svg">

    <title>Factories vs Abstract Factories - laminas-servicemanager - Laminas Docs</title>

    <link rel="stylesheet" href="https://docs.laminas.dev/css/styles.css">
    
</head>
<body id="page-top" class="components" data-spy="scroll" data-target=".toc" data-offset="20">

    
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
        
        <a class="logo-link navbar-brand" href="https://getlaminas.org/" data-tooltip data-placement="bottom" title="Go to the Laminas homepage">
            <img src="https://docs.laminas.dev/img/laminas-foundation-white.svg" height="28" alt="Laminas">
        </a>
        <a class="navbar-title" href="https://docs.laminas.dev/" data-tooltip data-placement="bottom" title="Go to the Laminas Documentation">
            Documentation
        </a>

        
        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">

            
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <div class="dropdown sub-project-selector">
                        <a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false">
                            All Docs
                        </a>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                            <a href="https://docs.mezzio.dev/" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-mezzio-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>Mezzio</strong><br>
                                        PSR-15 Middleware in Minutes
                                    </div>
                                </div>
                            </a>
                            <a href="https://docs.laminas.dev/components/" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-components-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>Components</strong><br>
                                        Components for Enterprise Applications
                                    </div>
                                </div>
                            </a>
                            <a href="https://docs.laminas.dev/mvc" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-mvc-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>MVC</strong><br>
                                        MVC for Enterprise Applications
                                    </div>
                                </div>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item dropdown-item--secondardy" href="https://docs.laminas.dev/migration/">
                                <div class="row align-items-center">
                                    <div class="col-md-8 offset-md-4 col-sm-12">
                                        Migration to Laminas
                                    </div>
                                </div>
                            </a>
                            <a class="dropdown-item dropdown-item--secondardy" href="https://docs.laminas.dev/tutorials/">
                                <div class="row align-items-center">
                                    <div class="col-md-8 offset-md-4 col-sm-12">
                                        Tutorials
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="https://getlaminas.org/participate" class="nav-link">Community</a>
                </li>
            </ul>

            
            
                <div class="d-block d-sm-none">
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="../../..">laminas-servicemanager</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                
                    
                        
    <li class="subnavigation__list-item ">
        <a href="../../quick-start/" class="subnavigation__link">Quick Start</a>
    </li>

                    
                        
    <li class="subnavigation__list-item ">
        <a href="../../psr-11/" class="subnavigation__link">PSR-11 Support</a>
    </li>

                    
                        
    <li class="subnavigation__list-item ">
        <a href="../../configuring-the-service-manager/" class="subnavigation__link">Configuring the service manager</a>
    </li>

                    
                        
    <li class="subnavigation__list-item ">
        <a href="../../delegators/" class="subnavigation__link">Delegators</a>
    </li>

                    
                        
    <li class="subnavigation__list-item ">
        <a href="../../lazy-services/" class="subnavigation__link">Lazy services</a>
    </li>

                    
                        
    <li class="subnavigation__list-item ">
        <a href="../../plugin-managers/" class="subnavigation__link">Plugin managers</a>
    </li>

                    
                        
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Autowiring & Configuration-based Factories</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../../reflection-abstract-factory/" class="subnavigation__link">Reflection-based Factory</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../../config-abstract-factory/" class="subnavigation__link">Configuration-based Factory</a>
    </li>

            
        </ul>
    </li>

                    
                        
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">CLI Commands</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../../cli-commands/introduction/" class="subnavigation__link">Introduction</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../../cli-commands/generate-dependencies-for-config-factory/" class="subnavigation__link">Generate Dependencies for Config Factory</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../../cli-commands/generate-factory-for-class/" class="subnavigation__link">Generate Factory for Class</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../../cli-commands/generate-ahead-of-time-factories/" class="subnavigation__link">Generate Ahead of Time Factories</a>
    </li>

            
        </ul>
    </li>

                    
                        
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Cookbook</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">Factories vs Abstract Factories</a>
    </li>

            
        </ul>
    </li>

                    
                        
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Migration Guide</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../../migration/v3-to-v4/" class="subnavigation__link">Migration from Version 3 to 4</a>
    </li>

            
        </ul>
    </li>

                    
                
            

                
                

                    
                    
                
            
        </ul>
    </div>

                </div>
            

            
            <div class="d-block d-sm-none">
                <div class="component-selector">
    
    <h5 class="component-selector__subtitle">Find documentation…</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
            </div>
        </div>
    </div>
</nav>

    
    <header class="header">
    <div class="container">
        <div class="row">

            
            <div class="col-8">
                <h1 class="header__title">
                    Components

                    
                        <small class="header__subtitle">laminas-servicemanager</small>
                    
                </h1>
            </div>

            
            <div class="col-4 text-right">
                
                    
<div class="version-selector">
    <div class="btn-group">
        <button type="button" class="btn dropdown-toggle" data-toggle="dropdown" data-display="static" aria-haspopup="true" aria-expanded="false" id="version-selector-dropdown">
            
                v4
            
        </button>
        <div class="dropdown-menu dropdown-menu-right dropdown-menu-lg-left" aria-labelledby="version-selector-dropdown">
            
                
                    <a href="../../quick-start/" class="dropdown-item active">
                        
                            v4 (latest)
                        
                    </a>
                
            
                
                    <a href="../../../v3/quick-start/" class="dropdown-item">
                        
                            v3
                        
                    </a>
                
            
        </div>
    </div>
</div>


                    <a href="#" class="header__link header__link--search" data-toggle="modal" data-target="#mkdocs_search_modal" title="Open search">
                        <i class="fa fa-search"></i> Search
                    </a>
                    <a href="https://github.com/laminas/laminas-servicemanager" class="header__link header__link--github" title="Go to repository of laminas-servicemanager">
                        <i class="fab fa-github"></i> GitHub
                    </a>
                
            </div>
        </div>
    </div>
</header>

    
    <div class="container">
        <div class="row">
            <div class="col-md-9 col-sm-12 content" role="main">
                
                
                    
    

    
    
        <div class="toc">
            <h6 class="toc__headline">On this page</h6>
            <ul class="toc__list">
                
                    <li class="toc__entry">
                        <a href="#comparisons" class="toc__link nav-link">Comparisons</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#convenience" class="toc__link nav-link">Convenience</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#explicitness" class="toc__link nav-link">Explicitness</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#tradeoffs" class="toc__link nav-link">Tradeoffs</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#tooling" class="toc__link nav-link">Tooling</a>
                    </li>
                
            </ul>
        </div>
    

                

                
                    <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        
            <li class="breadcrumb-item"><a href="https://docs.laminas.dev/">Overview</a></li>
            <li class="breadcrumb-item"><a href="https://docs.laminas.dev/components/">Components</a></li>

            
                <li class="breadcrumb-item"><a href="../../..">laminas-servicemanager</a></li>

                
                    
                        
                        
                    
                
                    
                        
                        
                            <li class="breadcrumb-item">Cookbook</li>
                        
                    
                

                <li class="breadcrumb-item active" aria-current="page">Factories vs Abstract Factories</li>
            
        
    </ol>
</nav>






    
    
        <h2 class="chapter__headline">Cookbook</h2>
    

    <h1 id="when-to-use-factories-vs-abstract-factories">When To Use Factories vs Abstract Factories</h1>
<p><code>Laminas\ServiceManager\Factory\AbstractFactoryInterface</code>
extends <code>Laminas\ServiceManager\Factory\FactoryInterface</code>, meaning they may be used
as either an abstract factory, or mapped to a specific service name as its
factory.</p>
<p>As an example:</p>
<pre class="highlight"><code class="language-php">return [
    'factories' =&gt; [
        SomeService::class =&gt; AnAbstractFactory::class,
    ],
];</code></pre>
<p>Why would you choose one approach over the other?</p>
<h2 id="comparisons">Comparisons</h2>
<div class="table-responsive"><table>
<thead>
<tr>
<th>Approach</th>
<th>Pros</th>
<th>Cons</th>
</tr>
</thead>
<tbody>
<tr>
<td>Abstract factory</td>
<td>One-time setup</td>
<td>Performance; discovery of code responsible for creating instance</td>
</tr>
<tr>
<td>Factory</td>
<td>Performance; explicit mapping to factory responsible</td>
<td>Additional (duplicate) setup</td>
</tr>
</tbody>
</table></div>
<p>Essentially, it comes down to <em>convenience</em> versus <em>explicitness</em> and/or
<em>performance</em>.</p>
<h2 id="convenience">Convenience</h2>
<p>Writing a factory per service is time-consuming, and, particularly in early
stages of an application, can distract from the actual business of writing the
classes and implementations; in addition, since requirements are often changing
regularly, this boilerplate code can be a nuisance.</p>
<p>In such situations, one or more abstract factories &mdash; such as the
<a href="../../config-abstract-factory/">ConfigAbstractFactory</a>, the
<a href="../../reflection-abstract-factory/">ReflectionBasedAbstractFactory</a>, or the
<a href="https://docs.laminas.dev/laminas-mvc/cookbook/automating-controller-factories/">laminas-mvc LazyControllerAbstractFactory</a>
&mdash; that can handle the bulk of your needs are often worthwhile, saving you
time and effort as you code.</p>
<h2 id="explicitness">Explicitness</h2>
<p>The drawback of abstract factories is that lookups by the service manager take
longer, and increase based on the number of abstract factories in the system.
The service manager is optimized to locate <em>factories</em>, as it can do an
immediate hash table lookup; abstract factories involve:</p>
<ul>
<li>Looping through each abstract factory<ul>
<li>invoking its method for service location</li>
<li>if the service is located, using the factory</li>
</ul>
</li>
</ul>
<p>This means, internally:</p>
<ul>
<li>a hash table lookup (for the abstract factory)</li>
<li>invocation of 1:N methods for discovery<ul>
<li>which may contain additional lookups and/or retrievals in the container</li>
</ul>
</li>
<li>invocation of a factory method (assuming successful lookup)</li>
</ul>
<p>As such, having an explicit map can aid performance dramatically.</p>
<p>Additionally, having an explicit map can aid in understanding what class is
responsible for initializing a given service. Without an explicit map, you need
to identify all possible abstract factories, and determine which one is capable
of handling the specific service; in some cases, multiple factories might be
able to, which means you additionally need to know the <em>order</em> in which they
will be queried.</p>
<p>The primary drawback is that you also end up with potentially duplicate
information in your configuration:</p>
<ul>
<li>Multiple services mapped to the same factory.</li>
<li>In cases such as the <code>ConfigAbstractFactory</code>, additional configuration
  detailing how to create the service.</li>
</ul>
<h2 id="tradeoffs">Tradeoffs</h2>
<p>What it comes down to is which development aspects your organization or project
favor. Hopefully the above arguments detail what tradeoffs occur, so you may
make an appropriate choice.</p>
<h2 id="tooling">Tooling</h2>
<p>We are offering a variety of <a href="../../cli-commands/introduction/">CLI commands</a>
to assist you in generating both dependency configuration and factories. Use
these to help your code evolve. An expected workflow in your application
development evolution is:</p>
<ul>
<li>Usage of the <code>ReflectionBasedAbstractFactory</code> as a "catch-all", so that you
  do not need to do any factory/dependency configuration immediately.</li>
<li>Usage of the <code>ConfigAbstractFactory</code>, mapped to services, once dependencies
  have settled, to disambiguate dependencies, or to list custom services
  returning scalar or array values.</li>
<li>Finally, usage of the <code>generate-factory-for-class</code> vendor binary to generate
  actual factory classes for your production-ready code, providing the best
  performance.</li>
</ul>




    <nav>
    <ul class="page-nav hidden-print">

        
        <li class="page-nav__item">
            
                <a rel="prev" class="page-nav__link page-nav__link--prev" href="../../cli-commands/generate-ahead-of-time-factories/">
                    <small class="page-nav__label">Previous</small>
                    <i class="fa fa-chevron-left"></i>
                    Generate Ahead of Time Factories
                </a>
            
        </li>

        
        <li class="page-nav__item">
            
                <a rel="next" class="page-nav__link page-nav__link--next" href="../../migration/v3-to-v4/">
                    <small class="page-nav__label">Next</small>
                    Migration from Version 3 to 4
                    <i class="fa fa-chevron-right"></i>
                </a>
            
        </li>
    </ul>
</nav>



                
            </div>
            <div class="col-md-3 col-sm-12 sidebar">
                <div class="donation-banner">
    <a href="https://getlaminas.org/support/">
        <h2>Donate</h2>
        <p>Support Laminas Developers Directly</p>
        <img src="https://funding.communitybridge.org/assets/cb-f-horizontal-white.svg">
    </a>
</div>

                
                    <div class="component-selector">
    
    <h5 class="component-selector__subtitle">Find documentation…</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="../../..">laminas-servicemanager</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                
                    
                        
    <li class="subnavigation__list-item ">
        <a href="../../quick-start/" class="subnavigation__link">Quick Start</a>
    </li>

                    
                        
    <li class="subnavigation__list-item ">
        <a href="../../psr-11/" class="subnavigation__link">PSR-11 Support</a>
    </li>

                    
                        
    <li class="subnavigation__list-item ">
        <a href="../../configuring-the-service-manager/" class="subnavigation__link">Configuring the service manager</a>
    </li>

                    
                        
    <li class="subnavigation__list-item ">
        <a href="../../delegators/" class="subnavigation__link">Delegators</a>
    </li>

                    
                        
    <li class="subnavigation__list-item ">
        <a href="../../lazy-services/" class="subnavigation__link">Lazy services</a>
    </li>

                    
                        
    <li class="subnavigation__list-item ">
        <a href="../../plugin-managers/" class="subnavigation__link">Plugin managers</a>
    </li>

                    
                        
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Autowiring & Configuration-based Factories</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../../reflection-abstract-factory/" class="subnavigation__link">Reflection-based Factory</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../../config-abstract-factory/" class="subnavigation__link">Configuration-based Factory</a>
    </li>

            
        </ul>
    </li>

                    
                        
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">CLI Commands</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../../cli-commands/introduction/" class="subnavigation__link">Introduction</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../../cli-commands/generate-dependencies-for-config-factory/" class="subnavigation__link">Generate Dependencies for Config Factory</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../../cli-commands/generate-factory-for-class/" class="subnavigation__link">Generate Factory for Class</a>
    </li>

            
                
    <li class="subnavigation__list-item ">
        <a href="../../cli-commands/generate-ahead-of-time-factories/" class="subnavigation__link">Generate Ahead of Time Factories</a>
    </li>

            
        </ul>
    </li>

                    
                        
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Cookbook</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">Factories vs Abstract Factories</a>
    </li>

            
        </ul>
    </li>

                    
                        
    <li class="subnavigation__list-item">
        <span class="subnavigation__headline">Migration Guide</span>
        <ul class="subnavigation__list">
            
                
    <li class="subnavigation__list-item ">
        <a href="../../migration/v3-to-v4/" class="subnavigation__link">Migration from Version 3 to 4</a>
    </li>

            
        </ul>
    </li>

                    
                
            

                
                

                    
                    
                
            
        </ul>
    </div>

                    
                
            </div>
        </div>
    </div>

    
    <footer class="footer">
    <div class="container">

        
        <div class="row">
            <div class="col-md-12 text-center">
                <a class="footer__button" href="#page-top"><i class="fa fa-chevron-up" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <h5>Laminas</h5>
                <ul>
                    <li>Laminas Project <a href="https://getlaminas.org/">The new foundation for the community-supported, open source continuation of Zend Framework</a></li>
                    <li>Laminas Components and MVC <a href="https://docs.laminas.dev/">Components and MVC for enterprise applications</a></li>
                    <li>Mezzio <a href="https://docs.mezzio.dev/">PSR-15 middleware in minutes</a></li>
                    <li>Maintenance Overview <a href="https://getlaminas.org/packages-maintenance-status/">Current maintenance status of Laminas &amp; Mezzio packages</a></li>
                </ul>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="row">

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">Support</h4>
                        <ul class="support__list">
                            <li class="support__list-item">
                                <a href="https://discourse.laminas.dev" class="support__link" title="Forum"><i class="fa fa-comments"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://laminas.dev/chat" class="support__link" title="Chat"><i class="fab fa-slack"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://github.com/laminas" class="support__link" title="Github"><i class="fab fa-github"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://phpc.social/@getlaminas" class="support__link" title="Mastodon"><i class="fab fa-mastodon"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://getlaminas.org/blog/rss.xml" class="support__link" title="Blog feed"><i class="fa fa-rss"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://getlaminas.org/security/feed" class="support__link" title="Security feed"><i class="fa fa-rss-square"></i></a>
                            </li>
                        </ul>
                    </div>

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">License</h4>
                        <p>
                            Code licensed under <a
                                href="https://github.com/laminas/laminas-servicemanager/blob/-/LICENSE.md">BSD 3-Clause</a>.
                        </p>
                    </div>

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">Copyright</h4>
                        <p>
                            <!--Built with love by the Laminas team with the help of our
                            <a href="https://github.com/laminas/laminas-servicemanager/graphs/contributors">contributors</a>.<br>-->
                            &copy; 2024 <a href="https://getlaminas.org/">Laminas Project</a> a Series of LF Projects, LLC.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>

    <script>
        let base_url = '../../..',
            project  = "components",
            siteName = 'laminas-servicemanager';
    </script>
    <script src="https://docs.laminas.dev/js/scripts.js"></script>
    
        <script src="../../../search/main.js"></script>
    

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Search</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
            </div>
            <div class="modal-body">
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search in laminas-servicemanager" id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
        </div>
    </div>
</div>
</body>


</html>
